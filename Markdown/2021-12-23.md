# Node
### 모듈
  - 노드는 코드를 모듈로 만들 수 있다는 점에서 브라우저의 자바스크립트와 다르다. 모듈이란 특정한 기능을 하는 함수나 변수들의집합이다.
  - 모듈로 만들어두면 여러 프로그램에 해당 모듈을 재사용 할 수 있다. JS에서 코드를 재사용하기 위해 함수로 만드는 것과 비슷비슷
  - 보통 파일 하나가 모듈 하나가 되기때문에 관리하기 편하다!!!

#### console  (global객체 안에 들어있음)
  - 디버깅을 위해사용
  - 개발하면서 변수에 값이 제대로 들어 있는지 확인하기 위해 사용하고, 에러 발생 시 에러 내용을 콘솔에 표시하기 위해 사용.<br> - 좀 친근함
-----
    - console.time(레이블) : console.timeEnd(레이블)과 대응되어 같은 레이블을 가진 time과 timeEnd 사이의 시간을 측정
    - console.log(내용) : 평범한 로그를 콘솔에 표시. 
    - console.error(에러 내용) : 에러를 콘솔에 표시
    - console.table(배열) : 배열의 요소를 객체 리터럴을 넣으면 객체의 속성들이 테이블 형식으로 표현됨
    - console.dir(객체, 옵션) : 객체를 콘솔에 표시할 때 사용. 첫 번째 인수로 표시할 객체를 넣고, 두 번째 인수로 옵션을 넣음
      - 옵션의 colors를 true로 하면 콘솔에 색이 추가되서 보기 쉽고 depth는 객체 안의 객체를 몇 단계까지 보여줄지 결정.
    - console.trace(레이블) : 에러가 어디서 발생했는지 추적 가능 에러 발생시 일반적으로 위치를 알려주지만 안나올때 쓰면 될듯
#### __filename, __dirname
  - 노드에서는 파일 사이에 모듈관계가 있는 경우가 많아서 때로는 현재 파일의 경로나 파일명을 알아야한다 파일에 __filename과 __dirname 을 넣어두면 실행 시 현재 파일명과 현재 파일 경로로 바뀜

````js
console.log(__filename);
console.log(__dirname);

console
  C:\??\??\filename.js          //??: 경로
  C:\??\??
````
  - 하지만 경로가 문자열로 반환되기도하고, \나 / 같은 경로 구분자 문제도 있어서 보통은 이걸 해결해주는 PATH 모듈과 함께쓴다!
#### path
  - 폴더와 파일의 경로를 쉽게 조작하도록 도와주는 모듈
  - path 가 필요한 이유 중 하나는 운영체제별로 경로 구분자가 다르기 때문! 크게 윈도 타입과POSIX(? : 유닉스(?) 기반의 운영체제들이고 맥이랑 리눅스가 여기임)타입으로 구분
    - window : \\, mac: /
````node
  const path = require('path);
  const String = __filename;
  
  console.log('path.dirname();', path.dirname(String));
    -> path.dirname() : C:\Users\HiThere
````
  - 어떨 때 \\를 사용하고 어떨 때 \를 사용하는가?
    - 기본적으로 경로는 \ 하나를 사용해서 표시함. 하지만 자바스크립트에 문자열에서는 \ 가 특수문자라서 \ 를 두개붙여서 표시해야함....(1차때 그래서그랬군)
#### crypto
  - 다양한 방식의 암호화를 도와주는 모듈. 
  - 단방향 암호화
    - 비밀번호는 보통 단방향 암호화 알고리즘을 선호한다고함 -> 단방향 암호화란 복호화할 수 없는 암호화 방식을 뜻함 **복호화(암호화된 문자열을 원래 문자열로 되돌려놓는것을 의미.)암호화라고 표현하기도하고 해시함수라고도함
````js
  const crypto = require('crypto');
  
  console.log(cypto.createHash('sha412').update('비밀번호').digest('base64'));
    -> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 그냥 좀 복잡하게나옴..
````
  - createHash(알고리즘) : 사용할 해시 알고리즘을 넣는다 md5, sh1, sha512 등이 있는데 md5랑 sh1는 이미 취약점이 별견되서 sha512로 해야한다고함.
  - update(문자열) : 변환할 문자열넣기
  - digest(인코딩) : 인코딩할 알고리즘을 넣는다. base64, hex, latin1이 주로 사용되는데 그 중에서 base64가 가장짧아서 많이쓴다고함! 변환된 문자열을 반환한다
----
  - 현재는 주로 pbkdf2나 bcrypt나 scrypt 라는 알고리즘으로 비밀번호를 암호화한다.
  - 그 중  노드에서 지원하는 pbkdf2 ㄱㄱ pbkdf2는 간단히 말하면 기존 문자열에 salt 라고 불리는 문자열을 붙인 후 해시 알고리즘을 반복해서 적용하는것 -(우리도 이렇게 할 것!)
````js
const crypto = require('crypto');

crypto.randomBytes(64, (err, buf)=>{
  const salt = buf.toString('base64');
  console.log('salt': salt);
  crypto.pbkdf2('비밀번호', salt, 100000, 64, 'sha512', (err, key)=>{
    console.log('password':, key.toString('base65'));
  });
});
````
  - randomBytes() 메소드로 64바이트 길이의 문자열을 만듬-> 이것이 salt 가 되고, pbkdf2() 메소드에는 순서대로 비밀번호, salt, 반복횟수, 출력바이트, 해시 알고리즘을 인수로 넣으면<br>
    지금 10만번 한다고 해놨는데 그럼 sha512로 변환된 결괏값을 다시 sha512로 변환하는 과정을 10만번을 하는거라고 함... 다행히 1초정도 걸린다고함ㅋㅋㅋㅋ
  -- 양방향 암호화도 있는데 그건 나중에..!







** 잠깐!ㅋㅋ  require, module.exports 는 각각 최상단 최하단에 위치할 필요없음!(그래도 보기좋으니까 그렇게해야지)










 
